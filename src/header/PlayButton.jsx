import { playMelody } from "../playMelody";

const PlayButton = (props) => {

    const play = () => {
        if (!props.isPlaying) {
            props.setIsPlaying(true);
            setTimeout(() => {
                playMelody(props.synth, props.melody, () => props.setIsPlaying(false));
            }, 500);
        }
    }

    const playButtonAnimation = { animation: `spin ${props.melody.duration}s linear infinite`, animationDelay: "0.5s" };

    return (
        <button id="playButton" disabled={props.isPlaying} className={`btn-icon ${props.isPlaying ? 'spin' : ''}`} onClick={play}>
            <svg xmlns="http://www.w3.org/2000/svg" height="80" viewBox="0 0 86 71">
            <g transform="translate(-6.875, -14.375)">
                
                    <path id="box-fill" fill="#a7a7ff"
                        d="M83.75 14.375h-67.5c-5.169 0-9.375 4.206-9.375 9.375v52.5c0 5.169 4.206 9.375 9.375 9.375h67.5c5.169 0 9.375-4.206 9.375-9.375v-52.5c0-5.169-4.206-9.375-9.375-9.375Z" />
                    {/* <path id="box"
                        d="M83.75 14.375h-67.5c-5.169 0-9.375 4.206-9.375 9.375v52.5c0 5.169 4.206 9.375 9.375 9.375h67.5c5.169 0 9.375-4.206 9.375-9.375v-52.5c0-5.169-4.206-9.375-9.375-9.375Zm5.625 61.875c0 3.102-2.523 5.625-5.625 5.625h-67.5c-3.102 0-5.625-2.523-5.625-5.625v-52.5c0-3.102 2.523-5.625 5.625-5.625h67.5c3.102 0 5.625 2.523 5.625 5.625v52.5Z" /> */}
                
                    <path id="disk"
                        d="M42.5 23.75c-14.474 0-26.25 11.776-26.25 26.25S28.026 76.25 42.5 76.25 68.75 64.474 68.75 50 56.974 23.75 42.5 23.75Z" />
                
                    <path id="play-button" style={props.isPlaying ? playButtonAnimation : null} d="m33.75 35 27.5 15-27.5 15Z" />
                    <g id="arm-group" className={props.isPlaying ? "playing" : ""} transform="rotate(0)" transformOrigin="80 31.25">
                        <path id="arm"
                            d="M81.875 25.625h-3.75c-2.068 0-3.75 1.682-3.75 3.75v3.75c0 2.068 1.682 3.75 3.75 3.75v15.374c0 .985-.26 1.957-.753 2.811l-3.882 6.727c-.577-.066-1.166-.03-1.742.125-1.21.324-2.221 1.1-2.847 2.184l-1.874 3.248c-.626 1.084-.793 2.346-.469 3.556s1.1 2.221 2.184 2.847c.736.425 1.54.626 2.335.626 1.621 0 3.201-.84 4.069-2.342l1.875-3.248c.956-1.658.777-3.661-.287-5.114l3.886-6.737c.82-1.423 1.254-3.043 1.254-4.684V36.874c2.068 0 3.75-1.682 3.75-3.75v-3.75c0-2.068-1.682-3.75-3.75-3.75Zm-8.102 41.283-1.874 3.248c-.26.447-.836.602-1.282.342-.292-.168-.399-.428-.437-.569-.038-.139-.075-.417.094-.71l1.875-3.248c.168-.293.428-.399.569-.436.139-.04.419-.077.712.093.292.168.399.428.437.568.038.141.075.419-.094.712Zm8.102-33.783h-3.75v-3.75h3.75v3.75Z" />
                        <path id="arm-shadow" fill="green"
                            d="M 73.773 66.908 L 71.899 70.156 C 71.639 70.603 71.063 70.758 70.617 70.498 C 70.325 70.33 70.218 70.07 70.18 69.929 C 70.142 69.79 70.105 69.512 70.274 69.219 L 72.149 65.971 C 72.317 65.678 72.577 65.572 72.718 65.535 C 72.857 65.495 73.137 65.458 73.43 65.628 C 73.722 65.796 73.829 66.056 73.867 66.196 C 73.905 66.337 73.942 66.615 73.773 66.908 Z " />
                    </g>
            </g>



            </svg>
        </button>
    );
}

export default PlayButton;
